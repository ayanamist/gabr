{% extends "base.html" %}
{% block main %}
{% for tweet in tweets %}
<div class="tweet {{ loop.cycle('odd', 'even') }}{% if loop.length > 1 and tweet.highlight %} reply{% endif %}{% if tweet.orig %} orig{% endif %}">
        <span class="avatar">
            <img src="{{ tweet.user.profile_image_url }}"/>
        </span>
        <span class="status shift">
            <span class="bold">
                <a href="{{ url_for("user", screen_name=tweet.user.screen_name) }}">
                    {{ tweet.user.screen_name }} ({{ tweet.user.name }})
                </a>
            </span>
            <a href="{{ url_for("status_reply", id=tweet.id) }}">@</a>
            <a href="{{ url_for("status_replyall", id=tweet.id) }}">@@</a>
            <a href="{{ url_for("status_retweet", id=tweet.id) }}">RT</a>
            {% if tweet.favorited %}
                <a href="{{ url_for("status_unfavorite", id=tweet.id) }}">UNFAV</a>
            {% else %}
                <a href="{{ url_for("status_favorite", id=tweet.id) }}">FAV</a>
            {% endif %}
            {% if not tweet.deleted and tweet.user.screen_name == g.screen_name %}
                {% set del_id = tweet.id %}
            {% elif tweet.retweet and tweet.retweet.user.screen_name == g.screen_name %}
                {% set del_id = tweet.retweet.id %}
            {% endif %}
            {% if del_id %}
                <a href="{{ url_for("status_delete", id=del_id) }}">DEL</a>
            {% endif %}
            {% set del_id = 0 %}
            <br/>
            {{ tweet.text|safe }}
            <br/>
            {% if tweet.entities %}
                {% for media in tweet.entities.media %}
                    <a href="{{ media.media_url }}">
                        <img src="{{ media.preview_url }}"/>
                    </a>
                    <br/>
                {% endfor %}
            {% endif %}
            <a href="{{ url_for("status", id=tweet.id) }}" class="time">{{ tweet.created_at_fmt }}</a>
            <span class="small">
                from {{ tweet.source|safe }}
                {% if tweet.in_reply_to_status_id %}
                    <a href="{{ url_for("status", id=tweet.id) }}">&gt;&gt;</a>
                {% endif %}
                {% if tweet.retweet %}
                    <br/>
                    <a href="{{ url_for("status", id=tweet.retweet.id) }}">
                        <span class="time">{{ tweet.retweet.created_at_fmt }}</span>
                        retweeted
                    </a>
                    by
                    <a href="{{ url_for("user", screen_name=tweet.retweet.user.screen_name) }}">{{ tweet.retweet.user.screen_name }}</a>
                    from {{ tweet.retweet.source|safe }}
                    {% if tweet.retweet_count > 1 %}
                        and {{ tweet.retweet_count - 1 }} other(s)
                    {% endif %}
                {% endif %}
            </span>
        </span>
</div>
{% else %}
<p>No tweets to display.</p>
{% endfor %}
{% endblock main %}